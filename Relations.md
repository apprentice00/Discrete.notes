# Relations

## Relations and Their Properties 关系与关系性质

### 二元关系

> 关系：集合A到集合B的二元关系R时A×B的子集(subset).及任一序偶的集合确定一个关系，记作：R:A×B, aRb。  
> 函数是特殊的关系
> 二元关系本质上是序偶的集合

#### complementary relation 补关系

### properties of relations 关系性质

#### reflexive 自反性

> 对于每个元素 a∈A 都有 (a,a)∈R，即 $\forall$a∈A, aRa。则称定义在集合A中的关系R是自反的  
> $\forall$x(x∈A ——> (x,x)∈R)

注：集合A上$2^{n^2-n}$种自反关系。A×A有$n^2$个序偶，如果要是自反，每个子集中必须含有n个(a,a),即减去这n个，然后求子集

#### irreflexive 反自反性

> 对于每个元素 a∈A 都有 (a,a)$\notin$R,则称定义在集合A中的关系R是反自反的  
> $\forall$x(x∈A ——> (x,x)$\notin$R)

例：  

* R1={(a,b)|a<b},
* A = $\emptyset$

注：不是自反不一定是反自反

#### symmetric 对称性

> 对于任意a,b∈A,若只要(a,b)∈R就有(b,a)∈R,则称定义在集合A中的关系R是对称的  
> $\forall$x$\forall$y ((x,y)∈R->(y,x)∈R)

例：  

* R1 = {(a,b)| a = b or a = -b}

注：

* 这里只要有(a,b)，就一定得有(b,a),才是对称的

#### antisymmetric 反对称性

> 对于任意a,b∈A,若(a,b)∈R并且(b,a)∈R,则一定有 a = b,则称定义在集合A中的关系R是反对称的  
> $\forall$x$\forall$y((x,y)∈R $\bigwedge$ (y,x)∈R ——>x=y )

例：  

* R1 = {(a,b)|a$\leq$b}

#### Asymmetric 非对称

> (a,b) ∈R -> (b,a)$\notin$R。  
> 非对称还得主对角线为0,即无自环

#### transitive 传递性

> 如果对于任意a,b,c ∈A，(a,b)∈R 且(b,c)∈R则(a,c)∈R,那么定义在集合A上的关系R就满足传递性。  
> $\forall$a$\forall$b$\forall$c(((a,b)∈R$\bigwedge$(b,c)∈R)——>(a,c)∈R)

例：  

* R1 = {(a,b)|a$\leq$b}

注：

1. 当前提不成立时，也满足传递性。如 A={(a,b)}
2. R$\supseteq$R$^n$当且仅当R具有传递性

### 运算

$\bigvee$ ,$\bigwedge$, - ,$\oplus$(除去相同的序偶)

### composition 关系的合成

> R1是集合A到B的关系，R2是集合B到集合C的关系。则R2和R1的合成是A到C的关系：

* 若$\exists$y∈B,使得(x,y)∈R1且(y,z)∈R2,则(x,z)∈R2,则(x,z) ∈ R2$\omicron$R1,表示关系R1与R2的合成

## Representing Relations 表示关系

### 矩阵

> 使用Zero-One Matrices表示,M$_R$ = [m$_i$$_j$], 另m$_i$$_j$=1  iff(a$_i$ , b$_i$∈R),A行B列

#### 集合A上的关系矩阵

* R是自反关系，M$_R$主对角线上的所有元素=1
* R是反自反关系，M$_R$主对角线上的所有元素=0
* R是对称关系，当且仅当m$_i$$_j$ = 1，就有m$_j$$_i$ = 1
* R是反对称关系，在主对角线两侧，不会出下m$_i$$_j$ = m$_j$$_i$

### Directed Graphs 有向图

> 一个有向图由顶点集合V(或节点)和边(或弧)的集合E有组成。其中边集是V中元素的有序对的集合。顶点a称为边(a,b)的初始顶点，顶点b称为这条边的终端顶点。

### 关系的合成

> $M_{R_1R_2}$ = $M_{R_1}$$M_{R_2}$ , 即矩阵的布尔积

注意：R$_2$$\omicron$R$_1$ == $M_{R_1}$$M_{R_2}$,注意下标

#### 关系的幂

利用关系的合成(矩阵的布尔积)，在由得到的矩阵画图  
注：R$^n$中的一条边，表示R中一次传递的n条路径

### 关系特征、关系图、关系矩阵

| 关系特征 | 关系图特征 | 关系矩阵特征 |
| --- |--- | --- |
| 自反|每一个结点处有一个环|对角线元素均为1,其余项可以是0或1|
| 反自反|每一个结点处无环|对角线元素均为0,其余项可以是0或1|
|对称|一对结点之间要么没有边，要么有一双向的边|对称矩阵,对角线上的项可以是0或者1|
|反对称|一对节点之间无双向的边|M$_i$$_j$ = 1 (i!=j)有M$_i$$_j$ = 0|
|非对称|\\ |主对角线全为0|
|传递|v1-v2,v2-v3,则有v1-v3|R$\supset$R$^n$|

## ***集合与关系中的计数问题***

> 计数方法：乘法法则：完成一个任务需要n步，每一步的方案数分别为：m1,m2,m3,m4...m$_n$,则完成该任务的的方案总数为：m1*m2*m3...*m$_n$  
> 乘法法则很简单，但可以解决很多计数问题。使用该法则的重点在于两个：一是确定完成任务的步骤，二是确定每一个步骤的可选方案数。

每一个关系对应着一个矩阵，把关系上的计数问题转化为矩阵上的计数问题。

例：

给定含有n个元素的集合A，能够定义2$^n$×3$^{(n^2-n)/2}$个不同的自反且反对称关系

解答:  
对称关系对应的矩阵的特点是: 对角线上的项可以是0或者1，其余项必须成对满足:当mij=1时，mij=0。因此，获得这样的矩阵可以分为以下步骤:  

1. 通过n步将对角线上的n项设为0或者1。因为每一步有2种方案，因此总共有2$^n$种方案
2. 进行 (n$^2$-n)/2步，每1步操作是将m$_i$$_j$,m$_j$$_i$设置为以下3种情况之一：
3. m$_i$$_j$ = 1 ，m$_j$$_i$ = 0
4. m$_i$$_j$ = 0 ，m$_j$$_i$ = 1
5. m$_i$$_j$ = 0 ，m$_j$$_i$ = 0

因为每一步有3种可选方案。所以总的方案数是3$^{(n^2-n)/2}$根据乘法法则，以上共进行了n +(n$^2$-n)/2步，总的方案数是: $2^n3^{(n^2-n)/2}$

## closures of relations 关系的闭包

> 对于不满足性质P的关系，补充一些序偶来构造出新的关系，使S包含了R且满足性质P。这里S不是唯一的，有特殊关系S',S'是所有S的subset，则称S'是关系R关于性质P的闭包。

### 闭包

1. 自反闭包,记为r(R)
2. 对称闭包,s(R)
3. 传递闭包,t(R)，也记作R*

这三种闭包有相同的描述形式，例如自反闭包满足：

1. r(R)是自反的
2. r(R)$\supseteq$R
3. $\forall$s((s$\supseteq$R$\bigwedge$s自反)->s$\supseteq$r(R))

#### 求解关系的闭包

定理：对于非空集合A上的关系R，有如下等式成立：

* r(R) = R $\cup$ I$_A$
* s(R) = R $\cup$ R$^c$
* t(R) = R $\cup$ R$^2$ $\cup$ R$^3$ $\cup$ ...

注：

1. I$_A$ 是对角线矩阵
2. R$^c$是R的逆

#### 求传递闭包

定理：假设A是含有n个元素的非空集合，R是A上的二元关系，则必存在一个正整数K<=n，使得：t(R) = R $\cup$ R$^2$ $\cup$ R$^3$ $\cup$ ... R$^K$

#### $\color{red}{用Warshall算法求传递闭包}$（大概率会考）

1. 置新矩阵A = M$_R$
2. 置i=1
3. 对所有j，如果A[j,i] = 1，则对k=1,2,...,n，计算A[j,k] = A[j,k] + A[i,k]
4. i= i+1
5. 如果 i<=n，则转到步骤(3)。否则，算法停止  

检查第 i 列，从第1行到第n行，遇到第j行，A[j,i] = 1，将第i行上的元素与第j行的元素进行逻辑相加。

## 等价关系 equivalence relation

> 如果集合A上的关系R是自反的、对称的和可传递的，则称其为等价关系。如果aRb,则称a与b是等价元素，记为a~b。

等价中的证明也是用这三个关系来证明的

### 重要的等价关系——模m同余

设m是一个整数，m>1。证明R = {(a,b)| a$\equiv$b (mod m)}是定义在整数集合上的等价关系
证明：
自反性：a$\equiv$a (mod m) ,因为a - a =0 被m整除，
对称性：假设a$\equiv$b (mod m)，则有a - b = km, 有,b-a = (-k)m,所以b$\equiv$a (mod m)
传递性：假设a$\equiv$b (mod m),b$\equiv$c (mod m)。由a - b =km,b - c = nm,有a - c = (a - b)+(b - c)=(k+n)m

注：模4同余等价类： [0]$_4$ = { ...-8 , -4 , 0 , 4 , 8...}

### equivalence class 等价类（物以类聚，人以群分）

> 设R是集合A上的一个等价关系。与A的元素a满足关系R的所有元素的**集合**称为元素a的**等价类**。A关于R的等价类用 [a]$_R$表示。只考虑一个关系时，只用写[a].

注：[a]$_R$ = {s | (a,s) ∈ R}

定理:设R是集合A上的等价关系。那么集合A的元素a和b存在以下等价命题:

* aRb
* [a] = [b]
* [a] $\cap$ [b] $\neq$ $\empty$

### determining partitions 等价关系划分集合

> 设R是集合A上的一个等价关系。R的所有等价类的并集就是A，因为A的每个元素a在它自己的等价类 [a]$_R$中

### 商集

> 定义:设R是非空集合A上的等价关系，以R的全体**不同**的等价类为元素的集合{[a]$_R$|a ∈ A}称为A关于R的商集，记为A/R

* 定理:非空集合A上的等价关系R决定了A的一个划分，该划分就是商集A/R
* 定理:设R$_1$和R$_2$为非空集合A上的等价关系，则R$_1$ = R$_2$当且仅当A/R$_1$=A/R$_2$

注意这里是不同的等价类，即 (a,b) $\notin$ R ,则[a] 和 [b] 不相等

### 等价关系运算

* 若R$_1$ , R$_2$ 是A上的等价关系，则 R$_1$ $\cap$ R$_2$ 也是等价关系
* 若R$_1$ , R$_2$ 是A上的等价关系 ，则 R$_1$ $\cup$ R$_2$ 是相容关系，但不一定是等价关系

## Partial order 偏序关系

> 如果在集合S上的关系R是**自反的**、**反对称的**、**传递的**,则称其为偏序。集合S与其定义在其上的偏序R一起称为**偏序集（Poset）**，用(S,R)表示。常将偏序关系R记为 ' ≼ ' , xRy -> x≼y

偏序关系就是确定一种次序

证明偏序关系紧扣三个性质
重要的偏序关系：

* (Z , $\geq$)
* (Z$^+$ , | )
* (S , $\subseteq$) , S为集合s的幂集

### Lexicographic order 字典顺序

给定两个偏序集(A$_1$,≼$_1$),(A$_2$,≼$_2$), A$_1$×A$_2$ 的字典顺序被定义为：

> (a$_1$,b$_1$)≺(a$_2$,b$_2$)  if  a$_1$ ≺$_1$ a$_2$ 或者 a$_1$ = b$_1$且b$_1$ ≺$_2$ b$_2$

### 可比性

1. Comparable :偏序集(S,≼)的元素a和b称为为**可比的**，如果a≼b或者b≼a。否则称为不可比
2. linear order 线序关系:如果(S,≼)是偏序集，且S中的每对元素都是可比的 (有关系的)，则S称为**全序集**或者**线序集**，且≼称为全序或者线序。一个全序集也称为链。
3. Well- ordered（良序关系:对于偏序集(S,≼)，如果≼是全序，并且S的每个非空子集都有一个最小元(素)，就称它为良序集

### Hasse Diagrams 哈塞图

> 哈塞图是部分排序的可视化表现

* 删去所有的自反的环
* 删去由传递性而必须出现的边
* 排列每条边，大的在上面

### Extremal elements 极值元素

* maximal element 极大元：a,当a不小于偏序集中任何一个元素。哈塞图的顶点
* minimal element 极小元：a,当a不大于偏序集中任何一个元素。
* greatest element 最大元 ：a,当a大于偏序集中的任何一个元素。
* least element 最小元：a,当a小于于偏序集中的任何一个元素。

注：

1. 极值与最值的关系，极值一定存在且可能有多个，最值不一定存在（这里的极值可能不能比较）且存在时只有一个.
2. 这里的集合是全集S的一个子集

### Topological Sorting 拓扑排序

移除偏序集(A, ≼ ) 中的极小元a1,在移除偏序集(A-{a1}, ≼ ) 中的极小元a2.....将移除的极小元按移除顺序排列

### Lub（最小上界） Glb（最大下界）

设(S,≼ )为偏序集，A$\subseteq$S，则:

* 如果a∈S，且对所有x∈A , x≼a ，则称a为A的上界(upperbound)
* 如果a∈S，且对所有x∈A , a≼x ，则称a为A的下界(lowerbound)
* 如果a是A的上界集合中的最小元。则称a为 A的最小上界或上确界LUB (Least Upper Bound)
* 如果a是A的下界集合中的最大元。则称a为 A的最大下界或下确界GLB(Greatest Lower Bound)

注：

1. 这里a是属于全集的，所以才有了上界这个集合
2. 上界集合是对于给定的集合如集合A,来说的

### Lattices 格

> 如果一个偏序集的每一对元素都有上确界和下确界就称这个偏序集为格。

注：

1. 一对元素有下界，但可能没有下确界（存在不可比的两个元素，因而无法找到最大下界），此时该偏序集就不是格